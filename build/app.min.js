var CouponsCtrl=["$rootScope","$scope","ngDialog","Popup",function(r,e,c,o){e.page_role();var s=0;e.open_coupons_query_window=function(){s=c.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"430px",template:__config_sys__.src_path+"html/coupons/coupons_query_window.html",scope:e,controller:["$scope","api","Popup","valid",function(a,n,o,i){a.data={search_data:{}},a.check_coupons=function(){var e,t=[];a.data.search_data.tel||a.data.search_data.coupon_code||t.push({key:"tel",valid:"check_required",data:a.data.search_data.tel,tip:"两者选一必填"},{key:"coupon_code",valid:"check_required",data:a.data.search_data.coupon_code,tip:"两者选一必填"}),!a.data.search_data.tel||i.check_mobile(a.data.search_data.tel)?(e=i.check(t),a.valid=e.data,e.status&&(a.data.search_data.is_use=0,a.data.search_data.is_cancel=0,n.request("common/third_plugin/third_plugin_operate",{method:"get_coupon_list",search_data:a.data.search_data}).then(function(e){1==e.status&&(0==e.data.data.length||e.data.data==[]?a.open_coupons_query_msg_window():0<Object.keys(e.data.data).length&&a.open_coupons_query_usable_window(e.data),c.close(s.id))}))):o.notice("请输入合法的手机号")},a.key_press=function(e){void 0!==e&&13!=e.keyCode||a.check_coupons()},a.ngDialog_close=function(){c.close(s.id),r.close_winform()}}]})},e.open_coupons_query_window();var i=0;e.open_coupons_query_usable_window=function(n){i=c.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"720px",template:__config_sys__.src_path+"html/coupons/coupons_query_usable_window.html",scope:e,controller:["$scope","api",function(e,t){e.data={form_data:{list_data:[],page_data:{}},vip_data:[]},e.data.form_data.list_data=n.data,e.selected=[],e.data.form_data.list_data.forEach(function(e){e.selected=""});var a=[];e.selected_ed=function(e){-1==a.indexOf(e)?(a.push(e),e.selected="check"):(a.splice(a.indexOf(e),1),e.selected="")},e.coupons_use=function(){0<a.length||0<Object.keys(a).length?(r.pass_to_coupons_msg(a),o.notice("操作成功")):o.notice("请选择优惠券")},e.ngDialog_close=function(){c.close(i.id),r.close_winform()}}]})};var t=0;e.open_coupons_query_msg_window=function(){t=c.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"430px",template:__config_sys__.src_path+"html/coupons/coupons_query_msg_window.html",scope:e,controller:["$scope",function(e){e.go_to_coupons_query=function(){c.close(t.id),e.open_coupons_query_window()},e.ngDialog_close=function(){c.close(t.id),r.close_winform()}}]})}}];CouponsCtrl.$injector=["$rootScope","$scope","ngDialog","Popup"];var IndexMainCtrl=["$rootScope","$scope","ngDialog","api","$location","Popup","$routeParams",function(t,e,a,n,o,i,r){t.vip_deatails_id="",t.page_role_parameter=0,e.page_role=function(){n.request("common/third_plugin/third_plugin_operate",{method:"check_rights"}).then(function(e){return 1==e.status?(t.page_role_parameter=1,!0):-1==e.status?(i.notice("对不起，您没有访问权限"),a.close(),o.path("/token"),!1):void 0})},t.pass_to_vip_msg=function(e){var t=JSON.stringify(e);try{window.external.SetVipInfo(t)}catch(e){}},t.pass_to_coupons_msg=function(e){var t=JSON.stringify(e);try{window.external.SetCouponInfo(t)}catch(e){}},t.close_winform=function(){try{window.external.ToggleBorwser()}catch(e){}}}];IndexMainCtrl.$injector=["$rootScope","$scope","ngDialog","api","$location","Popup","$routeParams"];var TokenCtrl=["$rootScope","$scope",function(e,t){}];TokenCtrl.$injector=["$rootScope","$scope"];var VipCtrl=["$rootScope","$scope","ngDialog","$location","Popup",function(r,t,c,a,e){t.page_role();var s=0;t.open_vip_query_window=function(){s=c.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"430px",template:__config_sys__.src_path+"html/vip/vip_query_window.html",scope:t,controller:["$scope","api","valid","Popup",function(a,n,o,i){a.data={search_data:{}},a.check_vip=function(){var e,t=[];a.data.search_data.tel_num||a.data.search_data.vip_code||t.push({key:"tel_num",valid:"check_required",data:a.data.search_data.tel_num,tip:"两者选一必填"},{key:"vip_code",valid:"check_required",data:a.data.search_data.vip_code,tip:"两者选一必填"}),!a.data.search_data.tel_num||o.check_mobile(a.data.search_data.tel_num)?(e=o.check(t),a.valid=e.data,e.status&&n.request("common/third_plugin/third_plugin_operate",{method:"customer_list",search_data:a.data.search_data}).then(function(e){1==e.status&&(0==e.data.length||e.data==[]?a.open_vip_query_no_window():0<Object.keys(e.data).length&&a.open_vip_query_yes_window(e.data),c.close(s.id))})):i.notice("请输入合法的手机号")},a.key_press=function(e){void 0!==e&&13!=e.keyCode||a.check_vip()},a.ngDialog_close=function(){c.close(s.id),r.close_winform()}}]})},t.open_vip_query_window();var n=0;t.open_vip_query_no_window=function(){n=c.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"430px",template:__config_sys__.src_path+"html/vip/vip_query_no_window.html",scope:t,controller:["$scope",function(e){e.go_to_reg=function(){c.close(n.id),a.path("/vip_reg")},e.go_to_query=function(){c.close(n.id),e.open_vip_query_window()},e.ngDialog_close=function(){c.close(n.id),r.close_winform()}}]})};var i=0;t.open_vip_query_yes_window=function(e){i=c.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"560px",template:__config_sys__.src_path+"html/vip/vip_query_yes_window.html",scope:t,controller:["$scope","api","Popup","$location",function(t,a,n,o){t.data={search_data:{},form_data:{},vip_data:[]},t.data.vip_data.push(e),t.vip_details=function(e){e?(r.vip_deatails_id=e,c.close(i.id),o.path("/vip_details")):n.notice("缺少vip_code_unique")},t.vip_use=function(e){a.request("common/third_plugin/third_plugin_operate",{method:"vip_detail",id:e}).then(function(e){1==e.status&&(t.data.form_data=e.data,0<Object.keys(t.data.form_data).length||0<t.data.form_data.length?(r.pass_to_vip_msg(t.data.form_data),n.notice("操作成功")):n.notice("暂无会员信息~"))})},t.ngDialog_close=function(){c.close(i.id),r.close_winform()}}]})}}];VipCtrl.$injector=["$rootScope","$scope","ngDialog","$location","Popup"];var VipDetailsCtrl=["$rootScope","$scope","ngDialog","Popup","api","$location",function(i,a,r,e,t,n){a.page_role();a.data={form_data:{},search_data:{},tab:1,consume_list_data:{list_data:[],page_data:{},search_data:{}},consume_detail_data:{list_data:[],page_data:{},search_data:{}},integral_detail_data:{list_data:[],page_data:{},search_data:{}},vip_coupon_list_data:{list_data:[],page_data:{},search_data:{}}},a.get_vip_details=function(e){t.request("common/third_plugin/third_plugin_operate",{method:"vip_detail",id:e}).then(function(e){1==e.status&&(a.data.form_data=e.data,"保密"==e.data.customer_sex?a.data.form_data.customer_sex="0":"男"==e.data.customer_sex?a.data.form_data.customer_sex="1":"女"==e.data.customer_sex&&(a.data.form_data.customer_sex="2"),a.data.consume_detail_data.search_data.vip_code=e.data.vip_code,a.data.consume_detail_data.search_data.series_code=e.data.series_code,a.data.consume_detail_data.search_data.source=e.data.source,a.data.consume_detail_data.search_data.vip_id=e.data.vip_id,a.data.consume_detail_data.search_data.vip_code_unique=e.data.vip_code_unique,a.get_consume_list_search())})},a.get_consume_list_search=function(){t.request("common/third_plugin/third_plugin_operate",{method:"get_consume_list",search_data:a.data.consume_detail_data.search_data,page_data:a.data.consume_list_data.page_data}).then(function(e){1==e.status&&(a.data.consume_list_data.list_data=e.data.data,a.data.consume_list_data.page_data=e.data.page_data)})},a.get_consume_detail_list=function(){t.request("common/third_plugin/third_plugin_operate",{method:"get_consume_detail_list",search_data:a.data.consume_detail_data.search_data,page_data:a.data.consume_detail_data.page_data}).then(function(e){1==e.status&&(a.data.consume_detail_data.list_data=e.data.data,a.data.consume_detail_data.page_data=e.data.page_data)})},a.get_integral_detail_search=function(){t.request("common/third_plugin/third_plugin_operate",{method:"get_integral_detail_list",search_data:a.data.consume_detail_data.search_data,page_data:a.data.integral_detail_data.page_data}).then(function(e){1==e.status&&(a.data.integral_detail_data.list_data=e.data.data,a.data.integral_detail_data.page_data=e.data.page_data)})},a.get_vip_coupon_list=function(){t.request("common/third_plugin/third_plugin_operate",{method:"get_customer_coupon_list",search_data:a.data.consume_detail_data.search_data,page_data:a.data.vip_coupon_list_data.page_data}).then(function(e){1==e.status&&(a.data.vip_coupon_list_data.list_data=e.data.data,a.data.vip_coupon_list_data.page_data=e.data.page_data)})},a.tab_switch=function(e){a.data.tab=e,1!=a.data.tab||null!=a.data.consume_list_data.list_data&&0!=a.data.consume_list_data.list_data.length||a.get_consume_list_search(),2!=a.data.tab||null!=a.data.consume_detail_data.list_data&&0!=a.data.consume_detail_data.list_data.length||a.get_consume_detail_list(),3!=a.data.tab||null!=a.data.integral_detail_data.list_data&&0!=a.data.integral_detail_data.list_data.length||a.get_integral_detail_search(),4!=a.data.tab||null!=a.data.vip_coupon_list_data.list_data&&0!=a.data.vip_coupon_list_data.list_data.length||a.get_vip_coupon_list()};var c=0;a.open_vip_query_details_window=function(){c=r.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"1152px",template:__config_sys__.src_path+"html/vip_details/vip_query_details_window.html",scope:a,controller:["$scope","api","Popup","valid",function(t,a,n,o){t.vip_use=function(){0<Object.keys(t.data.form_data).length||0<t.data.form_data.length?(i.pass_to_vip_msg(t.data.form_data),n.notice("操作成功")):n.notice("暂无会员信息~")},t.form_save=function(){var e={customer_code:t.data.form_data.customer_code?t.data.form_data.customer_code:"",customer_name:t.data.form_data.customer_name?t.data.form_data.customer_name:"",customer_sex:t.data.form_data.customer_sex?t.data.form_data.customer_sex:"",birthday:t.data.form_data.birthday,customer_tel:t.data.form_data.tel?t.data.form_data.tel:""};""==e.customer_tel||o.check_mobile(e.customer_tel)?a.request("common/third_plugin/third_plugin_operate",{method:"update_tel_etc",form_data:e}).then(function(e){1==e.status&&(r.close(c.id),t.open_vip_query_msg_window(e.message))}):n.notice("请输入正确的手机号")},t.ngDialog_close=function(){r.close(c.id),i.close_winform()}}]})};var o=0;a.open_vip_query_msg_window=function(t){o=r.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"430px",template:__config_sys__.src_path+"html/vip_details/vip_query_msg_window.html",scope:a,controller:["$scope",function(e){e.back_msg=t,e.go_back_details=function(){r.close(o.id),e.open_vip_query_details_window(),e.get_vip_details(i.vip_deatails_id)},e.ngDialog_close=function(){r.close(o.id),i.close_winform()}}]})},i.vip_deatails_id?(r.close(),a.get_vip_details(i.vip_deatails_id),a.open_vip_query_details_window(i.vip_deatails_data)):e.notice("缺少查询id")}];VipDetailsCtrl.$injector=["$rootScope","$scope","ngDialog","Popup","api","$location"];var VipRegCtrl=["$rootScope","$scope","ngDialog","Popup","api","$routeParams",function(i,t,r,c,e,s){t.page_role();t.data={brand_options:[],form_data:{}},t.get_brand_code_and_name=function(){e.request("common/third_plugin/third_plugin_operate",{method:"get_brand_code_and_name"}).then(function(e){1==e.status&&(t.data.brand_options=e.data.data)})},t.get_brand_code_and_name();var l=0;t.open_vip_query_reg_window=function(){l=r.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"780px",template:__config_sys__.src_path+"html/vip_reg/vip_query_reg_window.html",scope:t,controller:["$scope","api","valid",function(a,n,o){a.vip_reg=function(){var e,t=[{key:"customer_name",valid:"check_required",data:a.data.form_data.customer_name,tip:"必填项"},{key:"customer_sex",valid:"check_integer",data:a.data.form_data.customer_sex,tip:"必填项"},{key:"birthday",valid:"check_required",data:a.data.form_data.birthday,tip:"必填项"},{key:"tel",valid:"check_required",data:a.data.form_data.tel,tip:"必填项"},{key:"brand",valid:"check_required",data:a.data.form_data.brand,tip:"必填项"}];!a.data.form_data.customer_tel||o.check_mobile(a.data.form_data.customer_tel)?!a.data.form_data.customer_name||o.check_character(a.data.form_data.customer_name)?(e=o.check(t),a.valid=e.data,e.status&&(a.data.form_data.shop_code=s.shop_code,n.request("common/third_plugin/third_plugin_operate",{method:"register_vip",form_data:a.data.form_data}).then(function(e){1==e.status&&(r.close(l.id),a.open_vip_query_reg_success_window())}))):c.notice("姓名带有非法字符"):c.notice("请输入合法的手机号")},a.ngDialog_close=function(){r.close(l.id),i.close_winform()}}]})},t.open_vip_query_reg_window();var a=0;t.open_vip_query_reg_success_window=function(){a=r.open({overlay:!0,disableAnimation:!1,showClose:!1,closeByDocument:!1,width:"430px",template:__config_sys__.src_path+"html/vip_reg/vip_query_reg_success_window.html",scope:t,controller:["$scope","$location",function(e,t){e.go_to_query=function(){r.close(),t.path("/vip")},e.ngDialog_close=function(){r.close(a.id),i.close_winform()}}]})}}];VipRegCtrl.$injector=["$rootScope","$scope","ngDialog","Popup","api"];var myApp=angular.module("myApp",["ngRoute","ngDialog","myService","myDirective","myFilters","angular-popups"]).controller("IndexMainCtrl",IndexMainCtrl).config(["$routeProvider","$httpProvider","$locationProvider",function(e,t,a){e.when("/token",{templateUrl:__config_sys__.src_path+"html/token/token.html",controller:TokenCtrl}).when("/vip",{templateUrl:__config_sys__.src_path+"html/vip/vip.html",controller:VipCtrl}).when("/coupons",{templateUrl:__config_sys__.src_path+"html/coupons/coupons.html",controller:CouponsCtrl}).when("/vip_details",{templateUrl:__config_sys__.src_path+"html/vip_details/vip_details.html",controller:VipDetailsCtrl}).when("/vip_reg",{templateUrl:__config_sys__.src_path+"html/vip_reg/vip_reg.html",controller:VipRegCtrl}).otherwise({redirectTo:"/token"}),t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var s=function(e){var t,a,n,o,i,r,c="";for(t in e)if((a=e[t])instanceof Array)for(r=0;r<a.length;++r)o=a[r],(i={})[t+"["+r+"]"]=o,c+=s(i)+"&";else if(a instanceof Object)for(n in a)o=a[n],(i={})[t+"["+n+"]"]=o,c+=s(i)+"&";else null!=a&&(c+=encodeURIComponent(t)+"="+encodeURIComponent(a)+"&");return c.length?c.substr(0,c.length-1):c};t.defaults.transformRequest=[function(e){return angular.isObject(e)&&"[object File]"!==String(e)?s(e):e}]}]),myDirective=angular.module("myDirective",[]);angular.module("myFilters",[]).filter("orderObjectBy",function(){return function(e,a,t){var n=[];return angular.forEach(e,function(e){n.push(e)}),n.sort(function(e,t){return e[a]>t[a]?1:-1}),t&&n.reverse(),n}}).filter("checkmark",function(){return function(e){return!0===e||"true"===e||1===e||"1"===e?"✓":"✘"}}).filter("resolvetypemark",function(){return function(e){return"0"==e||0==e?"未处理":"-1"==e||-1==e?"问题单":"1"==e||1==e?"处理成功":""}}).filter("vipstatusmark",function(){return function(e){return"0"==e||0==e?"未激活":"1"==e||1==e?"激活":"2"==e||2==e?"停用":"3"==e||3==e?"挂失":void 0}}).filter("sourcemark",function(){return function(e){return 1==e||"1"==e?"erp":6==e||"6"==e?"pos":7==e||"7"==e?"百胜icrm":8==e||"8"==e?"e3后台":9==e||"9"==e?"淘宝":10==e||"10"==e?"拍拍":11==e||"11"==e?"openshop":12==e||"12"==e?"分销商":13==e||"13"==e?"京东":14==e||"14"==e?"亚马逊":15==e||"15"==e?"QQ网购":16==e||"16"==e?"一号店":17==e||"17"==e?"eBay":18==e||"18"==e?"网络分销主站":19==e||"19"==e?"淘宝分销":20==e||"20"==e?"新浪":21==e||"21"==e?"shopex":22==e||"22"==e?"ecshop":23==e||"23"==e?"当当":24==e||"24"==e?"邮乐":25==e||"25"==e?"乐酷天":26==e||"26"==e?"shopex分销王":27==e||"27"==e?"vjia":28==e||"28"==e?"优购":29==e||"29"==e?"efast":30==e||"30"==e?"微购物":31==e||"31"==e?"微信":32==e||"32"==e?"苏宁":33==e||"33"==e?"唯品会":34==e||"34"==e?"聚美优品":35==e||"35"==e?"卖网":36==e||"36"==e?"库巴":37==e||"37"==e?"名鞋库":38==e||"38"==e?"阿里巴巴":39==e||"39"==e?"口袋通":40==e||"40"==e?"工行":41==e||"41"==e?"银泰":42==e||"42"==e?"走秀网":43==e||"43"==e?"贝贝网":44==e||"44"==e?"蘑菇街":45==e||"45"==e?"拍鞋网":46==e||"46"==e?"好乐买":47==e||"47"==e?"乐蜂":48==e||"48"==e?"微盟":49==e||"49"==e?"折800":50==e||"50"==e?"OS主站":51==e||"51"==e?"API接口":52==e||"52"==e?"ncm":53==e||"53"==e?"BSERP2":54==e||"54"==e?"BS3000+":55==e||"55"==e?"第三方仓储物流":56==e||"56"==e?"唯品会JIT":57==e||"57"==e?"ISHOP":58==e||"58"==e?"飞牛":59==e||"59"==e?"蜜芽":60==e||"60"==e?"百度mall接口":61==e||"61"==e?"三足接口":62==e||"62"==e?"移动pos":63==e||"63"==e?"M6":65==e||"65"==e?"速卖通":66==e||"66"==e?"明星衣橱":67==e||"67"==e?"百胜E3":68==e||"68"==e?"润和pos":69==e||"69"==e?"内部员工":70==e||"70"==e?"PC门户":71==e||"71"==e?"雅瑞POS":72==e||"72"==e?"SMS系统":73==e||"73"==e?"巅峰呼叫中心":74==e||"74"==e?"会员通":78==e||"78"==e?"衣全球商城":9e3==e||"9000"==e?"错误来源":""}}).filter("formatmoneymark",function(){return function(e){return null==e?"0.00":Number(e).toFixed(2)}}).filter("formatmoney3mark",function(){return function(e){return null==e?"0.000":Number(e).toFixed(3)}}).filter("createtypemark",function(){return function(e){return 0==e||"0"==e?"消费":1==e||"1"==e?"调整":2==e||"2"==e?"活动":3==e||"3"==e?"兑换":4==e||"4"==e?"积分抵现":5==e||"5"==e?"顾客充值送":6==e||"6"==e?"过期清零":7==e||"7"==e?"积分变现":8==e||"8"==e?"停卡":10==e||"10"==e?"其他":12==e||"12"==e?"积分签到":13==e||"13"==e?"推荐送":14==e||"14"==e?"完善顾客资料送积分":15==e||"15"==e?"开卡送":16==e||"16"==e?"微信注册":17==e||"17"==e?"评价送":18==e||"18"==e?"调查问卷送":19==e||"19"==e?"过期恢复积分":void 0}}).filter("checkexpdate",function(){return function(e){return"0000-00-00 00:00:00"==e||""==e||null==e||"null"==e?"永久有效":e}}).filter("coupontypemark",function(){return function(e){return 4==e||"4"==e?"现金券":0==e||"0"==e?"折扣券":1==e||"1"==e?"折扣券":2==e||"2"==e?"赠券":3==e||"3"==e?"随机金额券":5==e||"5"==e?"代金券":6==e||"6"==e?"整单折扣券":7==e||"7"==e?"单品折扣券":8==e||"8"==e?"礼品券":9==e||"9"==e?"免运费券":11==e||"11"==e?"抵用券":void 0}}).filter("couponrebate",function(){return function(e){return 0==e?"0.0":Number(e).toFixed(1)}}),angular.module("myService",[]).factory("api",["$rootScope","$http","$location","$q","Popup","$routeParams","ngDialog",function(e,i,t,a,r,c,n){var o=function(e,t){var a="../api_demo/"+e+".json";return i.get(a,t).then(function(e){return 1==e.data.status&&e.data}).catch(function(e){return!1})},s=function(e,t,a){var n=__config_sys__.api_path+"?app_act="+e;if(t){t.user_info={user_code:c.user_code,shop_code:c.shop_code};var o=Date.parse(new Date)/1e3;t.timestamp=o,t.sign=function(e,t){var a=e.replace(/\//g,""),n="baison"+(a=a.replace(/(^\s*)|(\s*$)/g,""));if(t=$util.ksort(t),0!=Object.keys(t).length)for(var o in t)if("sign"!=o)if(angular.isObject(t[o]))for(var i in t[o])angular.isObject(t[o][i])||null!=t[o][i]&&(n+=i+t[o][i]);else null!=t[o]&&(n+=o+t[o]);return n=$.md5("123456"+n+"123456")}(e,t)}return t.page_data&&(t.page_data.num||(t.page_data.num=15)),i.post(n,t,a).then(function(e){return 1==e.data.status?e.data:-1==e.data.status?(r.notice(e.data.message),e.data):void 0}).catch(function(e){return!1})};return e.config_sys||(e.config_sys=__config_sys__),{get_api_url:function(e){return __config_sys__.api_path+"manage/web/index.php?app_act="+e},request:function(e,t,a){return!0===__config_sys__.fake_api?o(e,t):s(e,t,a)},request_demo:o}}]).factory("valid",["$rootScope",function(e){var a=function(e){return void 0!==e&&null!=e&&""!=e&&null!=e},n=function(e){return!!(/^(\+|-)?\d+$/.test(e)&&0<e)},o=function(e){return!!(/^(\+|-)?\d+$/.test(e)&&0<=e)},i=function(e){return!!/^1\d{10}$/.test(e)},r=function(e){return!!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},c=function(e){return 0<=e&&e<=1},s=function(e){return 1<=e&&e<=100},l=function(e){return!!(/^[0-9]+.?[0-9]*$/.test(e)&&0<=e)},u=function(e){return!!(/^[0-9]+.?[0-9]*$/.test(e)&&0<e)},_=function(e){return e[0]===e[1]},d=function(e){return!!/^\d+(\.\d{2})*$/.test(e)},p=function(e){return!/[^a-zA-Z0-9\_\u4e00-\u9fa5]/.test(e)};return{check:function(e){var t={status:!0,data:{}};return e.forEach(function(e){!function(e,t){switch(e){case"check_required":return a(t);case"check_positive_integer":return n(t);case"check_integer":return o(t);case"check_mobile":return i(t);case"check_email":return r(t);case"check_zero_one":return c(t);case"check_one_hundred":return s(t);case"check_zero_positive":return l(t);case"check_positive":return u(t);case"check_money_format":return d(t);case"check_eq":return _(t);case"check_character":return p(t)}return!0}(e.valid,e.data)?(t.status=!1,t.data[e.key]="error",t.data[e.key+"_ico"]="glyphicon-warning-sign",t.data[e.key+"_tip"]=e.tip):(t.data[e.key]="success",t.data[e.key+"_ico"]="glyphicon-ok",t.data[e.key+"_tip"]="")}),t},check_required:a,check_positive_integer:n,check_integer:o,check_mobile:i,check_email:r,check_zero_one:c,check_one_hundred:s,check_zero_positive:l,check_positive:u,check_money_format:d,check_eq:_,check_character:p}}]),function(a){var r={},t=/android/gi.test(navigator.appVersion),o=function(){var e=a.localStorage;return t&&(e=os.localStorage()),e};function i(e,t,a,n){return"function"==typeof t&&(n=a,a=t,t=void 0),"function"!=typeof a&&(n=a,a=void 0),{url:e,data:t,fnSuc:a,dataType:n}}r.trim=function(e){return String.prototype.trim?null==e?"":String.prototype.trim.call(e):e.replace(/(^\s*)|(\s*$)/g,"")},r.trimAll=function(e){return e.replace(/\s*/g,"")},r.isElement=function(e){return!(!e||1!=e.nodeType)},r.isArray=function(e){return Array.isArray?Array.isArray(e):e instanceof Array},r.isEmptyObject=function(e){return"{}"===JSON.stringify(e)},r.addEvt=function(e,t,a,n){r.isElement(e)?(n=n||!1,e.addEventListener&&e.addEventListener(t,a,n)):console.warn("$api.addEvt Function need el param, el param must be DOM Element")},r.rmEvt=function(e,t,a,n){r.isElement(e)?(n=n||!1,e.removeEventListener&&e.removeEventListener(t,a,n)):console.warn("$api.rmEvt Function need el param, el param must be DOM Element")},r.one=function(e,t,a,n){if(r.isElement(e)){n=n||!1;var o=this,i=function(){a&&a(),o.rmEvt(e,t,i,n)};o.addEvt(e,t,i,n)}else console.warn("$api.one Function need el param, el param must be DOM Element")},r.dom=function(e,t){if(1===arguments.length&&"string"==typeof e){if(document.querySelector)return document.querySelector(e)}else if(2===arguments.length&&e.querySelector)return e.querySelector(t)},r.domAll=function(e,t){if(1===arguments.length&&"string"==typeof e){if(document.querySelectorAll)return document.querySelectorAll(e)}else if(2===arguments.length&&e.querySelectorAll)return e.querySelectorAll(t)},r.byId=function(e){return document.getElementById(e)},r.first=function(e,t){return 1===arguments.length?r.isElement(e)?e.children[0]:void console.warn("$api.first Function need el param, el param must be DOM Element"):2===arguments.length?this.dom(e,t+":first-child"):void 0},r.last=function(e,t){if(1===arguments.length){if(!r.isElement(e))return void console.warn("$api.last Function need el param, el param must be DOM Element");var a=e.children;return a[a.length-1]}if(2===arguments.length)return this.dom(e,t+":last-child")},r.eq=function(e,t){return this.dom(e,":nth-child("+t+")")},r.not=function(e,t){return this.domAll(e,":not("+t+")")},r.prev=function(e){if(r.isElement(e)){var t=e.previousSibling;return t.nodeType&&3===t.nodeType?t=t.previousSibling:void 0}console.warn("$api.prev Function need el param, el param must be DOM Element")},r.next=function(e){if(r.isElement(e)){var t=e.nextSibling;return t.nodeType&&3===t.nodeType?t=t.nextSibling:void 0}console.warn("$api.next Function need el param, el param must be DOM Element")},r.closest=function(e,t){if(r.isElement(e)){var n,o,i=function(e,t){for(n=r.domAll(e.parentNode,t),o=function(e,t){for(var a=0,n=e.length;a<n;a++)if(e[a].isEqualNode(t))return e[a];return!1}(n,e);!o;){var a;if(null!=(a=e.parentNode)&&a.nodeType==a.DOCUMENT_NODE)return!1;i(a,t)}return o};return i(e,t)}console.warn("$api.closest Function need el param, el param must be DOM Element")},r.contains=function(e,t){var a=!1;if(t===e)return a=!0;do{if((t=t.parentNode)===e)return a=!0}while(t===document.body||t===document.documentElement);return a},r.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},r.attr=function(e,t,a){if(r.isElement(e))return 2==arguments.length?e.getAttribute(t):3==arguments.length?(e.setAttribute(t,a),e):void 0;console.warn("$api.attr Function need el param, el param must be DOM Element")},r.removeAttr=function(e,t){r.isElement(e)?2===arguments.length&&e.removeAttribute(t):console.warn("$api.removeAttr Function need el param, el param must be DOM Element")},r.hasCls=function(e,t){if(r.isElement(e))return-1<e.className.indexOf(t);console.warn("$api.hasCls Function need el param, el param must be DOM Element")},r.addCls=function(e,t){if(r.isElement(e)){if("classList"in e)e.classList.add(t);else{var a=e.className+" "+t;e.className=a}return e}console.warn("$api.addCls Function need el param, el param must be DOM Element")},r.removeCls=function(e,t){if(r.isElement(e)){if("classList"in e)e.classList.remove(t);else{var a=e.className.replace(t,"");e.className=a}return e}console.warn("$api.removeCls Function need el param, el param must be DOM Element")},r.toggleCls=function(e,t){if(r.isElement(e))return"classList"in e?e.classList.toggle(t):r.hasCls(e,t)?r.addCls(e,t):r.removeCls(e,t),e;console.warn("$api.toggleCls Function need el param, el param must be DOM Element")},r.val=function(e,t){if(r.isElement(e)){if(1===arguments.length)switch(e.tagName){case"SELECT":return e.options[e.selectedIndex].value;case"INPUT":case"TEXTAREA":return e.value}if(2===arguments.length)switch(e.tagName){case"SELECT":return e.options[e.selectedIndex].value=t,e;case"INPUT":case"TEXTAREA":return e.value=t,e}}else console.warn("$api.val Function need el param, el param must be DOM Element")},r.prepend=function(e,t){if(r.isElement(e))return e.insertAdjacentHTML("afterbegin",t),e;console.warn("$api.prepend Function need el param, el param must be DOM Element")},r.append=function(e,t){if(r.isElement(e))return e.insertAdjacentHTML("beforeend",t),e;console.warn("$api.append Function need el param, el param must be DOM Element")},r.before=function(e,t){if(r.isElement(e))return e.insertAdjacentHTML("beforebegin",t),e;console.warn("$api.before Function need el param, el param must be DOM Element")},r.after=function(e,t){if(r.isElement(e))return e.insertAdjacentHTML("afterend",t),e;console.warn("$api.after Function need el param, el param must be DOM Element")},r.html=function(e,t){if(r.isElement(e))return 1===arguments.length?e.innerHTML:2===arguments.length?(e.innerHTML=t,e):void 0;console.warn("$api.html Function need el param, el param must be DOM Element")},r.text=function(e,t){if(r.isElement(e))return 1===arguments.length?e.textContent:2===arguments.length?(e.textContent=t,e):void 0;console.warn("$api.text Function need el param, el param must be DOM Element")},r.offset=function(e){if(r.isElement(e)){var t=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),a=Math.max(document.documentElement.scrollTop,document.body.scrollTop),n=e.getBoundingClientRect();return{l:n.left+t,t:n.top+a,w:e.offsetWidth,h:e.offsetHeight}}console.warn("$api.offset Function need el param, el param must be DOM Element")},r.css=function(e,t){r.isElement(e)?"string"==typeof t&&0<=t.indexOf(":")&&e.style&&(e.style.cssText+=";"+t):console.warn("$api.css Function need el param, el param must be DOM Element")},r.cssVal=function(e,t){if(r.isElement(e)){if(2===arguments.length)return a.getComputedStyle(e,null).getPropertyValue(t)}else console.warn("$api.cssVal Function need el param, el param must be DOM Element")},r.jsonToStr=function(e){if("object"==typeof e)return JSON&&JSON.stringify(e)},r.strToJson=function(e){if("string"==typeof e)return JSON&&JSON.parse(e)},r.setStorage=function(e,t){if(2===arguments.length){var a=t;a="object"==typeof a?"obj-"+(a=JSON.stringify(a)):"str-"+a;var n=o();n&&n.setItem(e,a)}},r.getStorage=function(e){var t=o();if(t){var a=t.getItem(e);if(!a)return;if(0===a.indexOf("obj-"))return a=a.slice(4),JSON.parse(a);if(0===a.indexOf("str-"))return a.slice(4)}},r.rmStorage=function(e){var t=o();t&&e&&t.removeItem(e)},r.clearStorage=function(){var e=o();e&&e.clear()},r.fixIos7Bar=function(e){if(r.isElement(e)){if("ios"==api.systemType){var t=api.systemVersion,a=parseInt(t,10),n=api.fullScreen,o=api.iOS7StatusBarAppearance;7<=a&&!n&&o&&(e.style.paddingTop="20px")}}else console.warn("$api.fixIos7Bar Function need el param, el param must be DOM Element")},r.fixStatusBar=function(e){if(r.isElement(e)){var t=api.systemType;if("ios"==t)r.fixIos7Bar(e);else if("android"==t){var a=api.systemVersion;4.4<=(a=parseFloat(a))&&(e.style.paddingTop="25px")}}else console.warn("$api.fixStatusBar Function need el param, el param must be DOM Element")},r.toast=function(e,t,a){var n={},o=function(e,t){api.showProgress(e),setTimeout(function(){api.hideProgress()},t)};if(1===arguments.length)a=a||500,"number"==typeof e?a=e:n.title=e+"",o(n,a);else if(2===arguments.length){if(a=a||500,"number"==typeof t)a=t,t=null;e&&(n.title=e),t&&(n.text=t),o(n,a)}e&&(n.title=e),t&&(n.text=t),o(n,a=a||500)},r.post=function(){var e=i.apply(null,arguments),t={},a=e.fnSuc;if(e.url&&(t.url=e.url),e.data&&(t.data=e.data),e.dataType){var n=e.dataType.toLowerCase();"text"!=n&&"json"!=n||(t.dataType=n)}else t.dataType="json";t.method="post",api.ajax(t,function(e,t){e&&a&&a(e)})},r.get=function(){var e=i.apply(null,arguments),t={},a=e.fnSuc;if(e.url&&(t.url=e.url),e.dataType){var n=e.dataType.toLowerCase();"text"!=n&&"json"!=n||(t.dataType=n)}else t.dataType="text";t.method="get",api.ajax(t,function(e,t){e&&a&&a(e)})},r.setcookie=function(e,t,a){var n=new Date,o=864e5*a;n.setTime(n.getTime()+o),document.cookie=e+"="+encodeURI(t)+(null==a?"":";expires="+n.toGMTString())},r.getcookie=function(e){for(var t=document.cookie.split("; "),a=0;a<t.length;a++){var n=t[a].split("=");if(n[0]==e)return decodeURI(n[1])}return null},r.removecookie=function(e){r.setcookie(e,"",-1)},r.ksort=function(e,t){var a,n,o,i,r={},c=[],s=this,l={};switch(t){case"SORT_STRING":a=function(e,t){return s.strnatcmp(e,t)};break;case"SORT_LOCALE_STRING":var u=this.i18n_loc_get_default();a=this.php_js.i18nLocales[u].sorting;break;case"SORT_NUMERIC":a=function(e,t){return e+0-(t+0)};break;default:a=function(e,t){var a=parseFloat(e),n=parseFloat(t),o=a+""===e,i=n+""===t;return o&&i?n<a?1:a<n?-1:0:o&&!i?1:!o&&i?-1:t<e?1:e<t?-1:0}}for(o in e)e.hasOwnProperty(o)&&c.push(o);for(c.sort(a),this.php_js=this.php_js||{},this.php_js.ini=this.php_js.ini||{},l=(i=this.php_js.ini["phpjs.strictForIn"]&&this.php_js.ini["phpjs.strictForIn"].local_value&&"off"!==this.php_js.ini["phpjs.strictForIn"].local_value)?e:l,n=0;n<c.length;n++)r[o=c[n]]=e[o],i&&delete e[o];for(n in r)r.hasOwnProperty(n)&&(l[n]=r[n]);return i||l},a.$util=r}(window),myDirective.directive("pager",function(){return{restrict:"E",scope:{pageData:"=",pageSimply:"@",pageFunc:"="},templateUrl:"src/html/directive/pager/PagerList.html",controller:["$scope","$element","$route","ngDialog",function(t,e,a,n){null!=t.pageSimply&&""!=t.pageSimply&&1==t.pageSimply&&"true"==t.pageSimply||(t.pageSimply=!1);var o="default",i={};try{o=a.current.$$route.originalPath}catch(e){}t.goto_prev=function(){1<t.pageData.pageNum&&t.pageData.pageNum--,t.goto_page(t.pageData.pageNum)},t.goto_next=function(){t.pageData.pageNum<t.pageData.countPage&&t.pageData.pageNum++,t.goto_page(t.pageData.pageNum)},t.goto_first=function(){t.goto_page(1)},t.goto_last=function(){t.goto_page(t.pageData.countPage)},t.goto_page=function(e){t.pageData.num=parseInt(t.pageData.num),t.pageData.pageNum=e,t.pageFunc()},t.change_page_size=function(){var e=0;null!=i[o]&&""!=i[o]||(e=1),i[o]=t.pageData.num,$util.setStorage("pager_conf_local",i),0==e&&t.goto_page(1)},t.change_page_size(),null!=(i=$util.getStorage("pager_conf_local")?$util.getStorage("pager_conf_local"):{})[o]?t.pageData.num=parseInt(i[o]):t.pageData.num=15}]}}),myDirective.directive("selectDate",function(){return{restrict:"E,A",scope:{inputValue:"=",inputTitle:"@",inputReadonly:"=",inputEdit:"=",inputChange:"=",startView:"=",inputFormat:"@"},templateUrl:"src/html/directive/selectdate/DirectiveSelectDate.html",controller:["$scope","$element","ngDialog",function(e,t,a){e.show=!0,e.clear=function(){t.children().children().val(""),e.inputValue="",e.show=!0},e.set_val=function(){e.inputValue=t.children().children().val(),e.show=!1},e.click_date=function(){t.children().children().click()};e.$watch("inputValue",function(){""!=e.inputValue&&null!=e.inputValue||e.clear()})}]}});